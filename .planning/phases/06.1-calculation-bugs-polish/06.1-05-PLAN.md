---
phase: 06.1-calculation-bugs-polish
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/forms/BaselineMetricsForm.tsx
  - src/components/forms/ExperimentDesignForm.tsx
  - src/components/results/AdvancedResultsSection.tsx
autonomous: true

must_haves:
  truths:
    - "User sees section helper text at top of Baseline Metrics form"
    - "User does not see tooltip icons next to Baseline Metrics field labels"
    - "User sees updated annual visitors helper text"
    - "User does not see tooltip icons next to Experiment Design field labels (except decision latency)"
    - "User sees 'derive from annual' option inline with Daily eligible traffic label"
    - "User sees decision latency with tooltip icon only (no helper text below)"
    - "User sees 'imperfect information' wording in Advanced mode results interpretation"
  artifacts:
    - path: "src/components/forms/BaselineMetricsForm.tsx"
      provides: "Section helper text, removed redundant tooltips"
    - path: "src/components/forms/ExperimentDesignForm.tsx"
      provides: "Inline derive option, tooltip-only decision latency"
    - path: "src/components/results/AdvancedResultsSection.tsx"
      provides: "Updated how-to-interpret text"
  key_links:
    - from: "src/components/forms/ExperimentDesignForm.tsx"
      to: "derive from annual button"
      via: "inline with label text"
      pattern: "derive from annual"
---

<objective>
Update helper text and tooltips throughout forms, and improve results interpretation wording.

Purpose: Remove redundant tooltips where helpText is sufficient, move derive-from-annual option inline with label, and use clearer "imperfect information" wording in results.

Output: Cleaner forms with appropriate tooltip usage and improved results interpretation.
</objective>

<execution_context>
@/Users/ryan.lucht/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ryan.lucht/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/forms/BaselineMetricsForm.tsx
@src/components/forms/ExperimentDesignForm.tsx
@src/components/results/AdvancedResultsSection.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update BaselineMetricsForm helper text and remove redundant tooltips</name>
  <files>src/components/forms/BaselineMetricsForm.tsx</files>
  <action>
1. Add helper text below section header. Add at the start of the form:
```typescript
<form className="space-y-6" onSubmit={(e) => e.preventDefault()}>
  {/* Section helper text */}
  <p className="text-sm text-muted-foreground">
    This will help us calculate the range of potential outcomes from the test in dollars.
  </p>

  {/* Baseline Conversion Rate */}
  ...
```

2. Remove tooltips from these fields by removing the tooltip prop (keep helpText):

a) Baseline conversion rate - remove tooltip prop:
```typescript
<PercentageInput
  name="baselineConversionRate"
  label="Baseline conversion rate"
  placeholder="3.2%"
  helpText="This is your current conversion rate for the metric and audience/targeting you'd be testing. Ideally, choose a metric that is a revenue-generating event (e.g., visitors to signups)."
  // tooltip removed - redundant to helpText
  error={errors.baselineConversionRate?.message}
/>
```

b) Annual visitors - remove tooltip and update helper text:
```typescript
<NumberInput
  name="annualVisitors"
  label={`Annual ${unitLabel || 'visitors'}`}
  placeholder="1,000,000"
  helpText="Enter the number of visitors you expect in a year, based on the audience and triggering conditions of the test."
  // tooltip removed - redundant
  error={errors.annualVisitors?.message}
  unitLabelValue={unitLabel}
  onUnitLabelChange={handleUnitLabelChange}
/>
```

c) Value per conversion - remove tooltip:
```typescript
<CurrencyInput
  name="valuePerConversion"
  label="Value per conversion"
  placeholder="$50"
  helpText="Put the business value of one conversion in dollars. Examples: average order value, gross margin per purchase, first-year LTV, or a blended estimate. Pick one that matches how you evaluate impact."
  // tooltip removed - redundant
  error={errors.valuePerConversion?.message}
/>
```
  </action>
  <verify>Run `npm run dev`, verify Baseline Metrics section has helper text at top, no tooltip icons next to the three field labels</verify>
  <done>Baseline Metrics has section helper text, removed redundant tooltips from all three fields, updated annual visitors helper text</done>
</task>

<task type="auto">
  <name>Task 2: Update ExperimentDesignForm tooltips and derive option placement</name>
  <files>src/components/forms/ExperimentDesignForm.tsx</files>
  <action>
1. Remove tooltips from these fields (keep helpText where appropriate):

a) Test duration - remove tooltip
b) Daily traffic - remove tooltip, keep helpText
c) Variant allocation - remove tooltip
d) Eligible traffic - remove tooltip

2. Move "Derive from annual" option inline with the Daily traffic field label. Use a separate Label component approach:

```typescript
{/* Daily Traffic (required, with inline derive option) */}
<div className="space-y-2">
  <div className="flex items-center gap-2">
    <Label htmlFor="dailyTraffic">Daily eligible traffic</Label>
    {canDeriveFromAnnual && (
      <button
        type="button"
        onClick={handleDeriveFromAnnual}
        className="text-xs text-primary hover:text-primary/80"
      >
        (derive: {Math.round(sharedInputs.annualVisitors! / 365).toLocaleString()}/day)
      </button>
    )}
  </div>
  <NumberInput
    name="dailyTraffic"
    label="" // Empty label since we render it separately above
    placeholder="5,000"
    helpText="Average daily visitors who can enter the experiment"
    error={errors.dailyTraffic?.message}
  />
</div>
```

Note: If NumberInput requires a non-empty label, you may need to either:
- Add a `hideLabel` prop to NumberInput, or
- Use a visually hidden label (sr-only class), or
- Pass the label normally but hide it with CSS in this specific case

The simplest approach: Check if NumberInput can accept an empty string for label. If it renders an empty Label, that's fine. If it causes issues, wrap the whole field differently.

3. Decision latency - remove helpText, keep only tooltip:
```typescript
<NumberInput
  name="decisionLatencyDays"
  label="Decision latency"
  placeholder="0"
  // helpText removed - tooltip only
  tooltip="Time needed for analysis, review, and deployment after the test concludes."
  error={errors.decisionLatencyDays?.message}
  suffix="days"
/>
```
  </action>
  <verify>Run `npm run dev`, verify: tooltips removed from test duration/daily traffic/variant allocation/eligible traffic, derive option is inline with label, decision latency has tooltip but no helper text</verify>
  <done>Removed redundant tooltips, moved derive option inline, decision latency uses tooltip only</done>
</task>

<task type="auto">
  <name>Task 3: Update Advanced results interpretation text</name>
  <files>src/components/results/AdvancedResultsSection.tsx</files>
  <action>
Update the "How to interpret" box text (around line 200-217) to use "imperfect information" wording:

```typescript
{/* EVSI Intuition */}
<div className="rounded-xl border bg-muted/30 border-muted p-4 space-y-2">
  <p className="text-sm font-medium text-foreground">
    How to interpret {formatSmartCurrency(Math.max(0, results.netValueDollars))}
  </p>
  <p className="text-sm text-muted-foreground">
    A/B tests infer the actual treatment effect of an idea based on sample information.
    In other words — they are imperfect information.
    The {formatSmartCurrency(results.evsi.evsiDollars)} EVSI represents
    the expected improvement in your decision from running this test.
    {results.cod.codApplies && (
      <>
        {' '}However, running the test delays the rollout, costing you{' '}
        {formatSmartCurrency(results.cod.codDollars)} in expected value.
      </>
    )}
    {' '}The net {formatSmartCurrency(Math.max(0, results.netValueDollars))} is
    the most you should pay to run this test.
  </p>
</div>
```

Key change: Replace existing wording with "A/B tests infer the actual treatment effect of an idea based on sample information. In other words — they are imperfect information."
  </action>
  <verify>Run `npm run dev`, navigate to Advanced mode results, verify the interpretation text matches the new wording</verify>
  <done>Advanced results interpretation uses updated "imperfect information" wording</done>
</task>

</tasks>

<verification>
1. `npm run dev` - Application runs without errors
2. `npm run lint` - No lint errors
3. `npm run typecheck` - No type errors
4. Manual verification:
   - Baseline section: helper text at top, no tooltip icons on any of the 3 fields
   - Experiment Design: inline derive option next to Daily traffic label, minimal tooltips
   - Decision latency: has tooltip icon, no helper text below
   - Advanced results: updated "imperfect information" interpretation text
</verification>

<success_criteria>
- Baseline Metrics has section helper text at top
- No redundant tooltips on Baseline Metrics fields (CR, annual visitors, value per conversion)
- Annual visitors helper text updated per spec
- Experiment Design fields have no tooltips (except decision latency)
- Derive-from-annual option appears inline with Daily eligible traffic label
- Decision latency shows tooltip only (no helper text)
- Advanced results interpretation uses "imperfect information" wording
</success_criteria>

<output>
After completion, create `.planning/phases/06.1-calculation-bugs-polish/06.1-05-SUMMARY.md`
</output>
